<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â§©Ê∞ó√ó„É©„É≥„Éã„É≥„Ç∞„Ç≥„Éº„ÇπÊèêÊ°à„Ç¢„Éó„É™</title>
    <style>
      [data-lat][data-lng] {
        width: 100%;
        height: 400px;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    
    <!-- Geolonia Maps Embed API -->
    <script type="text/javascript" src="https://cdn.geolonia.com/v1/embed?geolonia-api-key=57e50c6fcf3240359f4cf08862c029d6"></script>
    
    <script>
      // Geolonia „Çπ„ÇØ„É™„Éó„ÉàË™≠„ÅøËæº„ÅøÂæå„Å´„Ç∞„É≠„Éº„Éê„É´„Å™Âú∞Âõ≥ÂàùÊúüÂåñÈñ¢Êï∞„ÇíÁôªÈå≤
      window.initializeGeoloniaMaps = function() {
        console.log('üó∫Ô∏è initializeGeoloniaMaps() called');
        
        if (!window.geolonia) {
          console.error('‚ùå Geolonia not loaded');
          return;
        }
        
        // „Åô„Åπ„Å¶„ÅÆ„Éá„Éº„ÇøÂ±ûÊÄß„ÇíÊåÅ„Å§Ë¶ÅÁ¥†„ÇíÂá¶ÁêÜ
        const mapElements = document.querySelectorAll('[data-lat][data-lng]');
        console.log(`Found ${mapElements.length} map elements to initialize`);
        
        mapElements.forEach((element, index) => {
          const lat = parseFloat(element.getAttribute('data-lat'));
          const lng = parseFloat(element.getAttribute('data-lng'));
          const zoom = parseInt(element.getAttribute('data-zoom') || '14');
          
          console.log(`Initializing map ${index + 1}: lat=${lat}, lng=${lng}, zoom=${zoom}`);
          
          try {
            // Geolonia.Map „ÇØ„É©„Çπ„Çí‰ΩøÁî®„Åó„Å¶ÊòéÁ§∫ÁöÑ„Å´Âú∞Âõ≥„Çí‰ΩúÊàê
            const map = new (window.geolonia as any).Map({
              container: element,
              style: 'https://cdn.geolonia.com/alls/v1/style.json',
              center: [lng, lat],
              zoom: zoom,
              pitch: 0,
              bearing: 0
            });
            
            map.on('load', () => {
              console.log(`‚úì Map ${index + 1} loaded successfully`);
            });
            
            map.on('error', (error: any) => {
              console.error(`Map ${index + 1} error:`, error);
            });
          } catch (err) {
            console.error(`Failed to initialize map ${index + 1}:`, err);
          }
        });
      };
      
      // Geolonia Ë™≠„ÅøËæº„ÅøÂÆå‰∫ÜÂæå„Å´ÂàùÊúüÂåñ
      window.addEventListener('load', function() {
        if (window.geolonia) {
          console.log('‚úì Geolonia loaded on page load');
          // React „Åå„É¨„É≥„ÉÄ„É™„É≥„Ç∞„Åô„Çã„Åæ„ÅßÂ∞ë„ÅóÂæÖ„Å§
          setTimeout(() => {
            window.initializeGeoloniaMaps();
          }, 500);
        }
      });
    </script>
    
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
